{% extends 'base.html' %}
{% block content %}

<div class="login mx-40 my-10">
    <h1 class="text-3xl mb-6 text-center font-bold">Song Details</h1>
    <div class="login mx-40 my-10 bg-gray-100 p-6 rounded-lg text-center">
        {% if song %}
            <div class="mb-6 mx-auto">
                <p><strong>Judul:</strong> {{ song.title }}</p>
                <p><strong>Genre(s):</strong> {{ song.genres|join:", " }}</p>
                <p><strong>Artist:</strong> {{ song.artist }}</p>
                <p><strong>Songwriter(s):</strong> {{ song.songwriters|join:", " }}</p>
                <p><strong>Durasi:</strong> {{ song.duration }}</p>
                <p><strong>Tanggal Rilis:</strong> {{ song.release_date }}</p>
                <p><strong>Tahun:</strong> {{ song.year }}</p>
                <p><strong>Total Play:</strong> {{ song.total_plays }}</p>
                <p><strong>Total Downloads:</strong> {{ song.total_downloads }}</p>
                <p><strong>Album:</strong> {{ song.album }}</p>
            </div>
        {% endif %}

        <form method="POST" action="/song/details/">
            {% csrf_token %}
            <div class="flex items-center w-full">
                <label for="progress" class="font-bold mr-2 flex-shrink-0">Progress:</label>
                <input type="range" id="progress" name="progress" min="0" max="100" class="slider w-full mx-1">
                <span id="progressValue" class="text-sm ml-2 flex-shrink-0">50%</span>
            </div>

            <div class="flex space-x-4 justify-center mt-4">
                <button type="button" onclick="checkProgress()" class="bg-gray-400 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Play</button>
                <button class="bg-gray-500 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Add to Playlist</button>
                {% if user.is_premium %}
                <button class="bg-gray-700 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Download</button>
                {% endif %}
                <button class="bg-black-500 hover:bg-gray-900 border border-gray-900 text-black font-bold hover:text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline">Kembali</button>
            </div>
        </form>
    </div>
</div>

<script>
document.getElementById('progress').oninput = function() {
    document.getElementById('progressValue').textContent = this.value + '%';
};

function checkProgress() {
    var progress = document.getElementById('progress').value;
    if (progress > 70) {
        alert('Adding play entry...');
        document.forms[0].submit();
    } else {
        alert('Progress less than 70%. No action taken.');
    }
}
</script>

{% endblock content %}
